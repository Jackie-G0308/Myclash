# mihomo (Clash Meta) æ‡’äººé…ç½®
# ç‰ˆæœ¬ V1.4.1-231211
# https://gist.github.com/liuran001/5ca84f7def53c70b554d3f765ff86a33
# ä½œè€…: ç¬¨è›‹ovo (bdovo.cc)
# ğŸ“² ç”µæŠ¥æ¶ˆæ¯: https://t.me/baka_not_baka
# å…³æ³¨æˆ‘çš„ ğŸ“² ç”µæŠ¥æ¶ˆæ¯ é¢‘é“è°¢è°¢å–µ https://t.me/s/BDovo_Channel
# ä¿®æ”¹è‡ªå®˜æ–¹ç¤ºä¾‹è§„åˆ™ https://wiki.metacubex.one/example/#meta
# è½¬è½½è¯·ä¿ç•™æ­¤æ³¨é‡Š
# å°½é‡æ·»åŠ äº†è¾ƒä¸ºè¯¦å°½çš„æ³¨é‡Šï¼Œä¸ç†è§£çš„åœ°æ–¹å»ºè®®å¯¹ç…§ è™šç©ºç»ˆç«¯ (Clash Meta) Docs è¿›è¡Œç†è§£
# è™šç©ºç»ˆç«¯ (Clash Meta) Docs åœ°å€: https://wiki.metacubex.one

########### åˆ†ç»„ ############
############################
pr:
  &pr {
    type: select,
    proxies:
      [
        ğŸƒ èŠ‚ç‚¹é€‰æ‹©,
        DIRECT,
      ],
  }

use: &use
  type: select
  proxies:
    [
      ğŸš€ å®ˆå€™é«˜çº§,
      ğŸš€ å®ˆå€™ç½‘ç»œ,
      ğŸ‚ iKuuu,
      DIRECT,
    ]

use1: &use1
  type: select
  use:
    - ğŸš€ å®ˆå€™é«˜çº§
    - ğŸš€ å®ˆå€™ç½‘ç»œ
    - ğŸ‚ iKuuu

use2: &use2
  type: select
  use:
    - ğŸš€ å®ˆå€™é«˜çº§

use3: &use3
  type: select
  use:
    - ğŸš€ å®ˆå€™ç½‘ç»œ

use4: &use4
  type: select
  use:
    - ğŸ‚ iKuuu

###### å»¶è¿Ÿæ£€æµ‹ URL##########
############################
p:
  &p {
    type: http,
    interval: 3600,
    health-check:
      {
        enable: true,
        url: https://www.gstatic.com/generate_204,
        interval: 300,
      },
  }

########### è®¢é˜…é“¾æ¥ ##########
############################
# å¯¹äºè®¢é˜…æ¥è¯´ï¼Œpath ä¸ºé€‰å¡«é¡¹ï¼Œä½†å»ºè®®å¯ç”¨
# æœ¬åœ°é…ç½®å¯ä»¥åªå¡« path
proxy-providers:
  ğŸš€ å®ˆå€™ç½‘ç»œ:
    <<: *p
    path: ./proxy_provider/ğŸš€ å®ˆå€™ç½‘ç»œ.yaml
    url: "https://subcc.sntp.uk/api/v1/client/subscribe?token=b8434da6703011219c55addfe428862a"
  ğŸ‚ iKuuu:
    <<: *p
    path: ./proxy_provider/ikuuu.yaml
    url: "https://uy2lc.no-mad-world.club/link/n4Na1fEYthTPmRkS?clash=3&extend=1"

  ğŸš€ å®ˆå€™é«˜çº§:
    <<: *p
    path: ./proxy_provider/ä¸€å…ƒæœºåœº.yaml
    url: "https://subcc.sntp.uk/api/v1/client/subscribe?token=1f3b666f5e48a5cc219eb86df3e44500"


########### è§„åˆ™æ¨¡å¼ ##########
############################
mode: rule
# ipv6 æ”¯æŒ
ipv6: true
log-level: info
# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true
# socks5/http ç«¯å£
mixed-port: 7890
# Meta å†…æ ¸ç‰¹æ€§ https://wiki.metacubex.one/config/general
# ç»Ÿä¸€å»¶è¿Ÿ
# æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼,å»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
unified-delay: true
# TCP å¹¶å‘
# åŒæ—¶å¯¹æ‰€æœ‰ipè¿›è¡Œè¿æ¥ï¼Œè¿”å›å»¶è¿Ÿæœ€ä½çš„åœ°å€
tcp-concurrent: true
# å¤–éƒ¨æ§åˆ¶ç«¯å£
external-controller: :9090

geodata-mode: true

# Geo æ•°æ®åº“ä¸‹è½½åœ°å€
# ä½¿ç”¨ FastGit ä»£ç† (https://fgit.cf)
# æºåœ°å€ https://github.com/MetaCubeX/meta-rules-dat
# å¯ä»¥æ›´æ¢é•œåƒç«™ä½†ä¸è¦æ›´æ¢å…¶ä»–æ•°æ®åº“ï¼Œå¯èƒ½å¯¼è‡´æ— æ³•å¯åŠ¨
geox-url:
  geoip: "https://hub.gitmirror.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://hub.gitmirror.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://hub.gitmirror.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb"

# è¿›ç¨‹åŒ¹é…æ¨¡å¼
# è·¯ç”±å™¨ä¸Šè¯·è®¾ç½®ä¸º off
# always å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
# strict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯
# off ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: strict

# ç¼“è§£ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜
# https://github.com/vernesong/OpenClash/issues/2614
keep-alive-interval: 1800

# å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹
global-client-fingerprint: random # éšæœºæŒ‡çº¹

# ç¼“å­˜
profile:
  store-selected: true
  store-fake-ip: true

# è‡ªåŠ¨åŒæ­¥æ—¶é—´ä»¥é˜²æ­¢æ—¶é—´ä¸å‡†å¯¼è‡´æ— æ³•æ­£å¸¸è”ç½‘
ntp:
  enable: true
  # æ˜¯å¦åŒæ­¥è‡³ç³»ç»Ÿæ—¶é—´ï¼Œéœ€è¦ root/ç®¡ç†å‘˜æƒé™
  write-to-system: false
  server: time.apple.com
  port: 123
  interval: 30

# åŸŸåå—…æ¢
sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true

######### tunæ¨¡å¼ ###########
############################
tun:
  enable: false  # enable 'true'
  stack: system  # or 'gvisor'
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-detect-interface: true

########### DNS ############
############################
# å·²é…ç½® ipv6
dns:
    enable: true
    ipv6: true
    listen: '0.0.0.0:1053'
    use-hosts: true
    default-nameserver: [119.29.29.29, 8.8.8.8, 1.1.1.1]
    nameserver: [223.5.5.5, 119.29.29.29]
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter: ['*.lan', '*.localdomain', '*.example', '*.invalid', '*.localhost', '*.test', '*.local', '*.home.arpa', 'time.*.com', 'time.*.gov', 'time.*.edu.cn', 'time.*.apple.com', 'time1.*.com', 'time2.*.com', 'time3.*.com', 'time4.*.com', 'time5.*.com', 'time6.*.com', 'time7.*.com', 'ntp.*.com', 'ntp1.*.com', 'ntp2.*.com', 'ntp3.*.com', 'ntp4.*.com', 'ntp5.*.com', 'ntp6.*.com', 'ntp7.*.com', '*.time.edu.cn', '*.ntp.org.cn', +.pool.ntp.org, time1.cloud.tencent.com, 'stun.*.*', 'stun.*.*.*', swscan.apple.com, mesu.apple.com, music.163.com, '*.music.163.com', '*.126.net', musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, '*.kuwo.cn', api-jooxtt.sanook.com, api.joox.com, y.qq.com, '*.y.qq.com', streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, localhost.ptlogin2.qq.com, '*.msftconnecttest.com', '*.msftncsi.com', '*.xiami.com', '*.music.migu.cn', music.migu.cn, +.wotgame.cn, +.wggames.cn, +.wowsgame.cn, +.wargaming.net, '*.*.*.srv.nintendo.net', '*.*.stun.playstation.net', 'xbox.*.*.microsoft.com', '*.*.xboxlive.com', '*.ipv6.microsoft.com', 'teredo.*.*.*', 'teredo.*.*', speedtest.cros.wr.pvp.net, +.jjvip8.com, www.douyu.com, activityapi.huya.com, activityapi.huya.com.w.cdngslb.com, www.bilibili.com, api.bilibili.com, a.w.bilicdn1.com]


########### ç­–ç•¥ç»„ ##########
############################
proxy-groups:
  - { name: ğŸƒ èŠ‚ç‚¹é€‰æ‹©, <<: *use }
  - { name: ğŸš€ å®ˆå€™é«˜çº§, <<: *use2 }
  - { name: ğŸš€ å®ˆå€™ç½‘ç»œ, <<: *use3, type: url-test  }
  - { name: ğŸ‚ iKuuu, <<: *use4, type: url-test  }
  - { name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯, type: select, proxies: [ ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ¯ å…¨çƒç›´è¿, ], }
  - { name: ğŸ¬ Emby, <<: *use1, filter: "(?i)emby|ğŸ¬ï½œEmby" }
  - { name: ğŸ“º å“”å“©å“”å“©, type: select, proxies: [ ğŸ¯ å…¨çƒç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ], }
  - { name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [ DIRECT, ğŸƒ èŠ‚ç‚¹é€‰æ‹©, ], }
  - { name: ğŸƒ åº”ç”¨å‡€åŒ–, type: select, proxies: [ DIRECT, ğŸƒ èŠ‚ç‚¹é€‰æ‹©, REJECT, ], }
  - { name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *use1, filter: "(?i)æ¸¯|hk|hongkong|hong kong" }
  - { name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, <<: *use1, filter: "(?i)å°|tw|taiwan" }
  - { name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *use1, filter: "(?i)æ—¥æœ¬|jp|japan" }
  - { name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *use1, filter: "(?i)(æ–°|sg|singapore)" }
  - { name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *use1, filter: "(?i)ç¾|us|unitedstates|united states", type: url-test }
  - { name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *pr }
  - { name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT, DIRECT, ğŸƒ èŠ‚ç‚¹é€‰æ‹©] }

########### è§„åˆ™é›†åˆ ##########
############################
rule-providers:
  anti-AD:
    type: http
    behavior: domain
    format: yaml
    path: ./rule_provider/anti-AD.yaml
    url: "https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml?"
    interval: 600
  anti-AD-white:
    type: http
    behavior: domain
    format: yaml
    path: ./rule_provider/anti-AD-white.yaml
    url: "https://raw.githubusercontent.com/privacy-protection-tools/dead-horse/master/anti-ad-white-for-clash.yaml?"
    interval: 600
  anti:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/anti.txt"
    path: ./rule_provider/anti.yaml
    interval: 600
  DIRECTL:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/DIRECT.txt"
    path: ./rule_provider/DIRECT.yaml
    interval: 600
  Clean:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/Clean.txt"
    path: ./rule_provider/Clean.yaml
    interval: 600
  PROXY:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/PROXY.txt"
    path: ./rule_provider/PROXY.yaml
    interval: 600
  Telegram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/Telegram.txt"
    path: ./rule_provider/Telegram.yaml
    interval: 600
  Emby:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/Emby.txt"
    path: ./rule_provider/Emby.yaml
    interval: 600
  USA:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/Jackie-G0308/Myclash/main/USA.txt"
    path: ./rule_provider/USA.yaml
    interval: 600


########### è§„åˆ™ ############
############################
rules:
  - RULE-SET,PROXY,ğŸƒ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,DIRECTL,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,Emby,ğŸ¬ Emby
  - RULE-SET,Clean,ğŸƒ åº”ç”¨å‡€åŒ–
  - RULE-SET,USA,ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
  - RULE-SET,anti,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª 
  - AND,((RULE-SET,anti-AD),(NOT,((RULE-SET,anti-AD-white)))),ğŸ›‘ å¹¿å‘Šæ‹¦æˆª # æ„Ÿè°¢ ğŸ“² ç”µæŠ¥æ¶ˆæ¯ @nextyahooquery æä¾›çš„å»ºè®®
  - GEOSITE,geolocation-!cn,ğŸŸ æ¼ç½‘ä¹‹é±¼
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
